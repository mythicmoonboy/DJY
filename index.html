<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DJY MLBB Tournament</title>
<style>
    body {margin:0;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#0b0b0b;color:white;overflow-x: auto;}
    
    /* Centralized Header */
    header {
        background: black;
        border-bottom: 3px solid red;
        padding: 20px;
        display: flex;
        flex-direction: column; /* Stack Title and Nav */
        align-items: center;
        gap: 15px;
    }
    header h1 { margin: 0; letter-spacing: 2px; text-transform: uppercase; }
    nav { display: flex; gap: 20px; }
    nav a {color:white;text-decoration:none;font-weight:bold;cursor:pointer; transition: 0.3s;}
    nav a:hover {color:red;}

    section {display:none;padding:20px; min-width: 1200px;}
    section.active {display:block;}
    h1,h2 {color:red;text-align:center;}
    
    /* Bracket Layout */
    .bracket-wrapper {
        display: flex;
        padding: 40px;
        gap: 50px;
        justify-content: flex-start;
        align-items: stretch;
    }
    .round {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        width: 200px;
    }
    .round-title {
        text-align: center;
        color: red;
        font-weight: bold;
        margin-bottom: 20px;
        text-transform: uppercase;
        font-size: 0.9em;
    }
    .matchup {
        background: #1a1a1a;
        border: 1px solid #333;
        border-left: 4px solid red;
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    .team {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        font-size: 13px;
    }
    .team input {
        background: transparent;
        border: none;
        color: white;
        width: 120px;
    }
    .score {
        background: #333;
        color: red;
        padding: 0 8px;
        font-weight: bold;
        border-radius: 2px;
    }
    
    .admin-controls { text-align: center; margin-bottom: 20px; }
    button {background: red;color: white;border: none;padding: 8px 16px;cursor: pointer;font-weight: bold;border-radius: 4px;}
    button:disabled { background: #555; }
</style>
</head>
<body>

<header>
    <h1>DJY MLBB Tournament</h1>
    <nav>
        <a onclick="show('home')">Home</a>
        <a onclick="show('bracket')">Bracket</a>
        <a onclick="show('tournaments')">Tournaments</a>
        <a onclick="show('videos')">Videos</a>
        <a onclick="show('admin')">Admin</a>
    </nav>
</header>

<section id="bracket" class="active">
    <div class="admin-controls">
        <button onclick="generateBracket()" id="genBtn" disabled>Reset Round of 32</button>
    </div>
    
    <div class="bracket-wrapper" id="bracket-grid">
        <!-- Rounds will be injected here -->
    </div>
</section>

<!-- Other sections kept for functionality -->
<section id="home"><h2>Who is DJY?</h2><p>Professional MLBB Host...</p></section>
<section id="admin">
    <h2>Admin Login</h2>
    <div style="text-align: center;">
        <input id="user" placeholder="Username" style="padding:8px">
        <input id="pass" type="password" placeholder="Password" style="padding:8px">
        <button onclick="login()">Login</button>
        <p id="status"></p>
    </div>
</section>

<script>
function show(id){
    document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

let isAdmin = localStorage.isAdmin === "true";
if(isAdmin) document.getElementById("genBtn").disabled = false;

let tournamentData = JSON.parse(localStorage.getItem("tournamentData")) || {
    r32: Array(16).fill().map((_, i) => ({ t1: "Team " + (i*2+1), t2: "Team " + (i*2+2), s1: 0, s2: 0 })),
    r16: Array(8).fill({ t1: "TBD", t2: "TBD", s1: 0, s2: 0 }),
    r8: Array(4).fill({ t1: "TBD", t2: "TBD", s1: 0, s2: 0 }),
    r4: Array(2).fill({ t1: "TBD", t2: "TBD", s1: 0, s2: 0 }),
    r2: [{ t1: "TBD", t2: "TBD", s1: 0, s2: 0 }]
};

function login(){
    if(document.getElementById("user").value==="moonboi" && document.getElementById("pass").value==="moonboi"){
        localStorage.isAdmin="true";
        isAdmin=true;
        document.getElementById("genBtn").disabled=false;
        show("bracket");
    }
}

function generateBracket() {
    if(!confirm("Reset entire bracket?")) return;
    tournamentData.r32 = Array(16).fill().map((_, i) => ({ t1: "Team " + (i*2+1), t2: "Team " + (i*2+2), s1: 0, s2: 0 }));
    save();
    render();
}

function save() { localStorage.setItem("tournamentData", JSON.stringify(tournamentData)); }

function updateMatch(roundKey, index, field, value) {
    tournamentData[roundKey][index][field] = value;
    save();
}

function render() {
    const grid = document.getElementById("bracket-grid");
    grid.innerHTML = "";

    const rounds = [
        { name: "Round of 32", key: "r32" },
        { name: "Round of 16", key: "r16" },
        { name: "Quarter Finals", key: "r8" },
        { name: "Semi Finals", key: "r4" },
        { name: "Grand Final", key: "r2" }
    ];

    rounds.forEach(round => {
        let roundDiv = document.createElement("div");
        roundDiv.className = "round";
        roundDiv.innerHTML = `<div class="round-title">${round.name}</div>`;

        tournamentData[round.key].forEach((match, i) => {
            let matchDiv = document.createElement("div");
            matchDiv.className = "matchup";
            matchDiv.innerHTML = `
                <div class="team">
                    <input value="${match.t1}" onchange="updateMatch('${round.key}',${i},'t1',this.value)" ${!isAdmin?'disabled':''}>
                    <span class="score" onclick="setScore('${round.key}',${i},1)">${match.s1}</span>
                </div>
                <div class="team">
                    <input value="${match.t2}" onchange="updateMatch('${round.key}',${i},'t2',this.value)" ${!isAdmin?'disabled':''}>
                    <span class="score" onclick="setScore('${round.key}',${i},2)">${match.s2}</span>
                </div>
            `;
            roundDiv.appendChild(matchDiv);
        });
        grid.appendChild(roundDiv);
    });
}

function setScore(roundKey, index, teamNum) {
    if(!isAdmin) return;
    let score = prompt("Enter Score:");
    if(score === null) return;
    tournamentData[roundKey][index]['s' + teamNum] = parseInt(score);
    save();
    render();
}

render();
</script>
</body>
</html>
