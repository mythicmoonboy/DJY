<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJY COMMUNITY TOURNAMENT</title>
    <style>
        :root { --red: #ff2b2b; --bg: #080808; --card: #121212; --border: #2a2a2a; }
        body { margin:0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; overflow-x: hidden; }
        
        header { background: #000; border-bottom: 2px solid var(--red); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 1000; }
        header h1 { margin: 0; color: var(--red); text-transform: uppercase; letter-spacing: 2px; font-size: 1.2rem; }
        nav { display: flex; justify-content: center; gap: 30px; margin-top: 10px; }
        nav a { color: #888; text-decoration: none; font-weight: bold; cursor: pointer; font-size: 0.85rem; }
        nav a.active { color: var(--red); }

        section { display: none; padding: 20px; min-height: calc(100vh - 100px); }
        section.active { display: block; }

        /* Announcement & Home */
        .announcement { background: var(--red); color: #000; padding: 12px; text-align: center; font-weight: 900; margin-bottom: 20px; border-radius: 4px; text-transform: uppercase; }
        .home-content { max-width: 700px; margin: auto; text-align: center; line-height: 1.6; }

        /* Tournament List */
        .t-card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 6px; cursor: pointer; transition: 0.3s; margin-bottom: 15px; }
        .t-card:hover { border-color: var(--red); transform: translateY(-3px); }
        .t-card h3 { color: var(--red); margin: 0 0 5px 0; }
        
        /* Tournament Detail View */
        #detail-view { display: none; }
        .back-btn { background: #333; color: white; border: none; padding: 5px 15px; cursor: pointer; margin-bottom: 20px; }

        /* Compact M6 Style Bracket */
        .bracket-container { display: flex; flex-direction: column; gap: 20px; align-items: center; scale: 0.9; }
        .round-row { display: flex; gap: 15px; }
        .round { display: flex; flex-direction: column; justify-content: space-around; width: 130px; gap: 10px; }
        .match { background: #000; border: 1px solid var(--border); padding: 3px; border-radius: 2px; }
        .team { display: flex; justify-content: space-between; padding: 2px 5px; font-size: 10px; border-bottom: 1px solid #222; }
        .team input { background: transparent; border: none; color: white; width: 80px; font-size: 10px; }
        .score { color: var(--red); font-weight: bold; width: 15px; text-align: center; cursor: pointer; }

        /* Admin Panels */
        .admin-login { width: 280px; margin: 40px auto; border: 1px solid var(--red); padding: 25px; background: #000; }
        .admin-login label { display: block; font-size: 10px; color: #666; margin-bottom: 2px; }
        .admin-login input { width: 100%; padding: 8px; margin-bottom: 15px; background: #111; border: 1px solid #333; color: white; box-sizing: border-box; }
        .admin-login button { width: 100%; padding: 10px; background: var(--red); border: none; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<header>
    <h1>DJY COMMUNITY TOURNAMENT</h1>
    <nav>
        <a id="nav-home" onclick="show('home')" class="active">HOME</a>
        <a id="nav-tournaments" onclick="show('tournaments')">TOURNAMENT</a>
        <a id="nav-admin" onclick="show('admin')">ADMIN</a>
    </nav>
</header>

<!-- HOME TAB -->
<section id="home" class="active">
    <div id="announcement-bar" class="announcement">Season 2 Registrations Now Open!</div>
    <div class="home-content">
        <h2 style="color:var(--red)">Who is DJY?</h2>
        <p>DJY is a premier MLBB YouTuber and professional community caster. Known for his tactical analysis and high-stakes tournament hosting, he has built a dedicated arena for community teams to compete at a professional level.</p>
        <p>This platform serves as the official hub for all DJY-hosted events, bringing the intensity of the M6 World Championship to the community level.</p>
    </div>
</section>

<!-- TOURNAMENT TAB -->
<section id="tournaments">
    <div id="tournament-list">
        <div class="t-card" onclick="openTournament('Season 2')">
            <h3>DJY Community Tournament Season 2</h3>
            <p style="font-size: 0.8rem; color: #888;">Status: UPCOMING | Prize: RM 500 + Donations</p>
        </div>
        <div class="t-card" onclick="openTournament('Invitational')">
            <h3>DJY Invitational Cup</h3>
            <p style="font-size: 0.8rem; color: #888;">Status: COMPLETED</p>
        </div>
    </div>

    <!-- Hidden Detail View -->
    <div id="detail-view">
        <button class="back-btn" onclick="closeTournament()">‚Üê Back to List</button>
        <h2 id="detail-title" style="color:var(--red)"></h2>
        
        <div class="bracket-container">
            <div style="color:var(--red); font-weight:bold; font-size:0.7rem; width:100%; text-align:left;">UPPER BRACKET</div>
            <div class="round-row">
                <div class="round" id="UB1"></div>
                <div class="round" id="UB2"></div>
                <div class="round" id="UB3"></div>
            </div>
            <div style="color:var(--red); font-weight:bold; font-size:0.7rem; width:100%; text-align:left; border-top:1px dashed #333; padding-top:10px;">LOWER BRACKET</div>
            <div class="round-row">
                <div class="round" id="LB1"></div>
                <div class="round" id="LB2"></div>
            </div>
        </div>
    </div>
</section>

<!-- ADMIN TAB -->
<section id="admin">
    <div id="login-form" class="admin-login">
        <h3 style="color:var(--red); text-align:center;">SYSTEM ACCESS</h3>
        <label>username:</label>
        <input id="user" type="text">
        <label>password:</label>
        <input id="pass" type="password">
        <button onclick="login()">LOGIN</button>
    </div>

    <div id="dashboard" class="admin-login" style="display:none; width:450px;">
        <h3 style="color:var(--red); text-align:center;">COMMAND CENTER</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div style="border:1px solid #222; padding:10px;">
                <label>Global Announcement:</label>
                <input id="new-msg" placeholder="Announcement text">
                <button onclick="updateMsg()" style="font-size:10px;">Post Update</button>
            </div>
            <div style="border:1px solid #222; padding:10px;">
                <label>Manage Staff:</label>
                <input id="staff-u" placeholder="Username">
                <input id="staff-p" type="password" placeholder="Password">
                <button onclick="alert('Staff Added')" style="font-size:10px;">Add Staff</button>
            </div>
        </div>
        <button onclick="location.reload()" style="background:#444; margin-top:15px;">Logout</button>
    </div>
</section>

<script>
let currentUser = null;
let bData = JSON.parse(localStorage.getItem('djy_dynamic_data')) || {
    UB1: Array(4).fill().map((_,i)=>({t1:"Team "+(i*2+1), t2:"Team "+(i*2+2), s1:0, s2:0})),
    UB2: Array(2).fill({t1:"TBD", t2:"TBD", s1:0, s2:0}),
    UB3: [{t1:"TBD", t2:"TBD", s1:0, s2:0}],
    LB1: Array(2).fill({t1:"TBD", t2:"TBD", s1:0, s2:0}),
    LB2: [{t1:"TBD", t2:"TBD", s1:0, s2:0}]
};

function show(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.getElementById('nav-'+id).classList.add('active');
}

function openTournament(name) {
    document.getElementById('tournament-list').style.display = 'none';
    document.getElementById('detail-view').style.display = 'block';
    document.getElementById('detail-title').innerText = name;
    render();
}

function closeTournament() {
    document.getElementById('tournament-list').style.display = 'block';
    document.getElementById('detail-view').style.display = 'none';
}

function login() {
    if(document.getElementById('user').value === "moonboi" && document.getElementById('pass').value === "123") {
        currentUser = "master";
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        render();
    }
}

function updateMsg() { document.getElementById('announcement-bar').innerText = document.getElementById('new-msg').value.toUpperCase(); }

function updateScore(r, i, f, v) {
    bData[r][i][f] = v;
    if(f.startsWith('s')) {
        let m = bData[r][i];
        let win = parseInt(m.s1) > parseInt(m.s2) ? m.t1 : m.t2;
        let map = {UB1:"UB2", UB2:"UB3", LB1:"LB2"};
        if(map[r]) bData[map[r]][Math.floor(i/2)][(i%2===0)?'t1':'t2'] = win;
    }
    localStorage.setItem('djy_dynamic_data', JSON.stringify(bData));
    render();
}

function render() {
    const rounds = ["UB1","UB2","UB3","LB1","LB2"];
    rounds.forEach(r => {
        const el = document.getElementById(r); if(!el) return;
        el.innerHTML = "";
        bData[r].forEach((m, i) => {
            el.innerHTML += `<div class="match">
                <div class="team"><input value="${m.t1}" onchange="updateScore('${r}',${i},'t1',this.value)" ${!currentUser?'disabled':''}> <div class="score" onclick="setS('${r}',${i},1)">${m.s1}</div></div>
                <div class="team"><input value="${m.t2}" onchange="updateScore('${r}',${i},'t2',this.value)" ${!currentUser?'disabled':''}> <div class="score" onclick="setS('${r}',${i},2)">${m.s2}</div></div>
            </div>`;
        });
    });
}

function setS(r, i, t) { if(currentUser) { let s = prompt("Score:"); if(s) updateScore(r, i, 's'+t, s); } }

render();
</script>
</body>
</html>
