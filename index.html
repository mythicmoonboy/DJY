<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DJY MLBB Tournament</title>
<style>
body {margin:0; font-family:Arial; background:#0b0b0b; color:white;}
header {background:black; border-bottom:3px solid red; padding:15px; display:flex; justify-content:space-between; align-items:center;}
nav a {color:white; text-decoration:none; margin-left:15px; font-weight:bold; cursor:pointer;}
nav a:hover {color:red;}
section {display:none; padding:20px;}
section.active {display:block;}
h1,h2 {color:red; text-align:center;}
p {text-align:center; max-width:800px; margin:auto; line-height:1.6;}
button {background:red; color:white; border:none; padding:6px 10px; margin:4px; cursor:pointer;}
input[type="text"], input[type="number"] {padding:4px; margin:2px; width:80px; text-align:center; background:#111; color:white; border:1px solid red;}
.box {background:#111; border-left:4px solid red; padding:10px; margin:10px 0;}
.iframe-container iframe {border:2px solid red; margin:10px;}
footer {background:black; border-top:2px solid red; text-align:center; padding:15px; margin-top:30px;}

/* Bracket layout */
.bracket-container {display:grid; grid-template-columns:repeat(6,180px); justify-content:center; position:relative; gap:20px; margin-top:20px;}
.bracket-column {display:flex; flex-direction:column; gap:30px; position:relative;}
.bracket-match {background:#1a1a1a; border:2px solid red; padding:8px; text-align:center; min-width:150px; position:relative;}
.bracket-line {position:absolute; width:2px; background:red; z-index:-1;}
.grand-final {background:#111; border:3px solid red; padding:10px; width:200px; margin:auto; text-align:center;}
</style>
</head>
<body>

<header>
<h1>DJY MLBB Tournament</h1>
<nav>
<a onclick="show('home')">Home</a>
<a onclick="show('bracket')">Bracket</a>
<a onclick="show('tournaments')">Tournaments</a>
<a onclick="show('videos')">Videos</a>
<a onclick="show('admin')">Admin</a>
</nav>
</header>

<!-- HOME -->
<section id="home" class="active">
<h2>Who is DJY?</h2>
<p>DJY is a passionate Mobile Legends content creator and tournament host. His tournaments are designed to be intense, well-organized, and entertaining. Beyond tournaments, DJY connects players and fans through engaging content and events.</p>
</section>

<!-- BRACKET -->
<section id="bracket">
<h2>Tournament Bracket</h2>
<button onclick="generateBracket()" id="genBtn" disabled>Generate Round of 32</button>
<div class="bracket-container" id="bracket-grid">
  <!-- Upper and Lower Bracket columns will be inserted here -->
</div>
<h3 style="text-align:center;">Grand Final</h3>
<div id="grand-final" class="grand-final"></div>
</section>

<!-- TOURNAMENTS -->
<section id="tournaments">
<h2>Tournaments</h2>
<h3>Upcoming</h3>
<div class="box">DJY MLBB Season 2 – RM500</div>
<h3>Ongoing</h3>
<div class="box">DJY MLBB Season 1</div>
<h3>Completed</h3>
<div class="box">DJY Invitational Cup</div>
</section>

<!-- VIDEOS -->
<section id="videos">
<h2>DJY Videos</h2>
<div class="iframe-container" style="text-align:center;">
<iframe width="320" height="180" src="https://www.youtube.com/embed/VIDEO_ID"></iframe>
<iframe width="320" height="180" src="https://www.youtube.com/embed/VIDEO_ID"></iframe>
<p>Replace <b>VIDEO_ID</b> with DJY’s YouTube video ID.</p>
</div>
</section>

<!-- ADMIN -->
<section id="admin">
<h2>Admin Login</h2>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<br>
<button onclick="login()">Login</button>
<p id="status"></p>
</section>

<footer>© 2025 DJY MLBB Tournament</footer>

<script>
// Navigation
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

// Admin
let isAdmin = localStorage.isAdmin === "true";

// Bracket Data
let rounds = {upper:[], lower:[], final:[]};
let bracketGrid = document.getElementById("bracket-grid");
let grandFinal = document.getElementById("grand-final");

if(isAdmin) document.getElementById("genBtn").disabled = false;

// Login
function login(){
if(user.value==="moonboi" && pass.value==="moonboi"){
localStorage.isAdmin="true";
isAdmin=true;
document.getElementById("genBtn").disabled=false;
status.innerText="Admin logged in";
show("bracket");
}else{
status.innerText="Wrong login";
}
}

// Save/load bracket
function saveBracket(){ localStorage.setItem("bracket", JSON.stringify(rounds)); }
function loadBracket(){ let saved=JSON.parse(localStorage.getItem("bracket")); if(saved) rounds=saved; }

// Generate round of 32
function generateBracket(){
rounds.upper=[];
for(let i=1;i<=32;i+=2){
rounds.upper.push({a:"Team "+i,b:"Team "+(i+1),scoreA:0,scoreB:0});
}
rounds.lower=[];
rounds.final=[];
saveBracket();
renderBracket();
}

// Admin edit team name
function editTeam(round,index,key){
if(!isAdmin) return alert("Admin only");
let name = prompt("Enter new team name:", rounds[round][index][key]);
if(name) rounds[round][index][key]=name;
saveBracket();
renderBracket();
}

// Admin set score
function setScore(round,index){
if(!isAdmin) return alert("Admin only");
let match = rounds[round][index];
let scoreA=parseInt(prompt("Score for "+match.a, match.scoreA));
let scoreB=parseInt(prompt("Score for "+match.b, match.scoreB));
match.scoreA=isNaN(scoreA)?0:scoreA;
match.scoreB=isNaN(scoreB)?0:scoreB;
let winner = scoreA>=scoreB?match.a:match.b;
let loser = winner===match.a?match.b:match.a;

if(round==="upper"){ rounds.lower.push({a:loser,b:"TBD",scoreA:0,scoreB:0}); }
else if(round==="lower"){ rounds.final.push(winner); }
rounds.upper.splice(index,1);
rounds.lower.splice(index,1);
saveBracket();
renderBracket();
}

// Render bracket visually
function renderBracket(){
bracketGrid.innerHTML="";
let totalColumns=6; // Adjust columns for upper and lower rounds
let upperCol = document.createElement("div");
upperCol.className="bracket-column";
rounds.upper.forEach((m,i)=>{
let div = document.createElement("div");
div.className="bracket-match";
div.innerHTML=`<input type="text" value="${m.a}" onchange="editTeam('upper',${i},'a')"> vs <input type="text" value="${m.b}" onchange="editTeam('upper',${i},'b')"><br>Score: ${m.scoreA}-${m.scoreB}<br>${isAdmin?'<button onclick="setScore(\'upper\','+i+')">Set Score</button>':''}`;
upperCol.appendChild(div);
});
let lowerCol = document.createElement("div");
lowerCol.className="bracket-column";
rounds.lower.forEach((m,i)=>{
let div = document.createElement("div");
div.className="bracket-match";
div.innerHTML=`<input type="text" value="${m.a}" onchange="editTeam('lower',${i},'a')"> vs <input type="text" value="${m.b}" onchange="editTeam('lower',${i},'b')"><br>Score: ${m.scoreA}-${m.scoreB}<br>${isAdmin?'<button onclick="setScore(\'lower\','+i+')">Set Score</button>':''}`;
lowerCol.appendChild(div);
});
bracketGrid.appendChild(upperCol);
bracketGrid.appendChild(lowerCol);

// Render Grand Final
grandFinal.innerHTML="";
rounds.final.forEach(f=>{ grandFinal.innerHTML+=`<div>${f}</div>`; });
}

renderBracket();
</script>

</body>
</html>
